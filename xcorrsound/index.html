<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Demonstration of waveform compare — an xcorrsound tool</title>
<link rel="stylesheet" href="/StyleJS/css/style.css">

<script src="/StyleJS/ajax.js"></script>

<script>
	function resetForm() {
		document.getElementById('compare_form').reset();
		resetResults();
	}

	function resetResults() {
		document.getElementById("content").innerHTML = "";
		document.getElementById("progressBar").className = "";
		document.getElementById("progressBar").innerHTML = "";
	}

	/**Ajax Request (Submits the form below through AJAX
	 *               and then calls the ajax_response function)
	 */
	function ajax_request() {
		document.getElementById("progressBar").className = "spinner";
		document.getElementById("content").innerHTML = "Processing...";

		var formData = new FormData();
		formData.append('firstWavToCompare', document
				.getElementById('firstWavToCompare').files[0]);
		formData.append('secondWavToCompare', document
				.getElementById('secondWavToCompare').files[0]);
		var submitTo = 'compare_files.php';
		http_uploadBinaries('POST', submitTo, ajax_response, formData);
	}

	/**Ajax Response (Called when ajax data has been retrieved)
	 *
	 * @param   object  data   Javascript (JSON) data object received
	 *                         through ajax call
	 */
	function ajax_response(data) {
		resetResults();
		document.getElementById("content").innerHTML = data;
	}
</script>
</head>

<body>

	<div id="scape" class="sign-up">
		<table>
			<tr>
				<td width="50%"><img src="/images/logo.png" /></td>
				<td width="50%">
					<h1 class="sign-up-title">Demonstration of waveform compare —
						an xcorrsound tool</h1>
				</td>
			</tr>
		</table>

		<br /> <br /> <br /> <br />

		<form name="compare_form" id="compare_form" action="compare_files.php"
			method="post" enctype="multipart/form-data">

			<div class="input-button">
				<label for="firstWavToCompare">Select first wav file for comparison</label><br /> <input
					type="file" name="firstWavToCompare" id="firstWavToCompare">
			</div>
			<div class="input-button">
				<label for="secondWavToCompare">Select second wav file for comparison</label><br />
				<input type="file" name="secondWavToCompare" id="secondWavToCompare">
			</div>
			<br />

			<div class="buttonHolder">
				<input type="button" class="sign-up-button" onclick="ajax_request()"
					value="Compare Waveforms"> <input type="button"
					class="reset-button" onclick="resetForm()" value="Reset">
			</div>

			<br />
			<ul class="list">
				<li>This tests xcorrsound functionality, but not
					performance which is affected by network bandwidth and server load.</li>
			</ul>
			<br />

			<hr>

			<table>
				<tr>
					<td width="50%">
						<div id="content" class="result-title"></div>
					</td>
					<td width="50%">
						<div id="progressBar"></div>
					</td>
				</tr>
			</table>
		</form>

	</div>

	<div id="links" class="sign-up">
		<h1 class="sign-up-title">Related Links</h1>
		<ul class="list">
			<li><a href="https://github.com/openplanets/xcorrsound">Xcorrsound
					at Github</a></li>
			<li>Xcorrsound blog post: coming soon</li>
			<li>For any question or further information, please contact
				Bolette Jurik at statsbiblioteket.dk</li>
		</ul>
	</div>
</body>
</html>
